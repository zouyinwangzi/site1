"use strict";(globalThis.webpackChunkast_block_templates=globalThis.webpackChunkast_block_templates||[]).push([[910],{1910:(e,t,o)=>{o.r(t),o.d(t,{default:()=>w});var s=o(3771),l=o(1760),n=o(6597),c=o(8242),r=o(3914),a=o(1594),i=o(6134),p=o(9453),u=o(9260),m=o(2209),d=o(7510),g=o(5034),b=o(7497),y=o(2642),h=o(2231),f=o(3839);const{spectra_common_styles:k,is_rtl:v}=ast_block_template_vars,_="visible",w=(0,s.A)((0,c.A)(e=>{const{getDisableAi:t,getDisablePreview:o,getTogglePopup:s}=e("astra-sites");return{disableAi:t(),disablePreview:o(),togglePopup:s()}}))((0,a.memo)(({item:e,content:t,stylesheet:o,astraCustomizer:s,globalStylesheet:c,colorPalette:w,dynamicContent:E,selectedImages:x,disableAi:A,togglePopup:R,email:$,phone:I,address:N,onClickBlock:S,isLocked:C})=>{const T=(0,a.useRef)(null),P=(0,a.useRef)(null),O=e["thumbnail-image-url"]||"",j=e["featured-image-url"]||"",q=(0,i.Fx)(),{licenseStatus:z}=(0,f.A)();let L=0,B=0;const{importing:D}=(0,r.A)(e=>{const{getImporting:t}=e("astra-sites");return{importing:t()}}),{setImporting:H}=(0,n.A)("astra-sites"),[W,F]=(0,a.useState)({importing:!1}),[M,U]=(0,a.useState)(`${ast_block_template_vars.uri}dist/placeholder_200_200.png`),[G,K]=(0,a.useState)(`${ast_block_template_vars.uri}dist/placeholder_200_200.png`);function V(){const e=T?.current,t=P?.current;if(!e||!t)return;const o=e.parentNode.offsetWidth/1200,s=o*t.offsetHeight;e.style.transform=`scale(${o})`,e.style.height=`${s}px`,e.parentNode&&(e.parentNode.style.minHeight=`${s}px`)}(0,a.useEffect)(()=>{D?document.querySelectorAll(".single-block").forEach(e=>{e.style.pointerEvents="none"}):document.querySelectorAll(".single-block").forEach(e=>{e.style.pointerEvents="auto"})},[D]),(0,a.useLayoutEffect)(()=>{let e=!0;const l=x,n=new Image;n.src=O;const r=new Image;r.src=j;const a=P.current;function p(t,o){e&&(t.onload=()=>{o(t.src)})}p(n,U),p(r,K);const u=document.getElementById("astra-wp-editor-styles-inline-css")?.textContent.replace(/:root/g,".block-container").replace(/body/g,".block-container"),m=document.getElementById("astra-block-editor-styles-inline-css")?.textContent.replace(/:root/g,".block-container").replace(/body/g,".block-container"),g=ast_block_template_vars.wp_stylesheet;let b="";o&&(o=((e,t=[])=>A?e:0!==Object.keys(E).length&&E?t&&0===t.length?e:e.replace(/background-image\s*:\s*url\(['"]?([^'")]+)['"]?\)/g,function(e,o){if((0,d.p)(o))return e;if(!t[B]?.url)return"";const s=t[B]?.url;return B++,B%=t.length,'background-image: url("'+s+'")'}):e)(o,l),o=o?.replaceAll("--wp--preset--color--ast-global-color-","--ast-global-color-")),b+=g?`<style type="text/css" id="wp-includes-styles">${g}</style>`:"",b+=s?`<style type="text/css" id="gt-astra-customizer">${s}</style>`:"",b+=`<style type="text/css" id="gt-spectra-common-stylesheet">${k}</style>`,b=o?`${b} <style type="text/css" id="gt-common-stylesheet">${o}</style>`:b,c&&(b+=`<style type="text/css" id="gt-global-stylesheet"> ${c} </style>`),u&&(b+=`<style type="text/css" id="gt-wpeditor-css" > ${u} </style>`),m&&(b+=`<style type="text/css" id="gt-blockeditor-css"> ${m} </style>`);const y={"--wp--style--block-gap":getComputedStyle(document.documentElement).getPropertyValue("--wp--style--block-gap").trim()||"24px"};let h="";if(Object.keys(y).forEach(e=>{h+=`\t\t\t\t\t\t${e}: ${y[e]};\n`}),a&&t){let e=a.shadowRoot;if(null===e&&(e=a.attachShadow({mode:"open"})),null===e)return;let o=(0,i.Lt)(t);if(!A){const e=E??[];e&&Object.keys(e)?.length>0&&Object.keys(e).forEach(t=>{o=null!==e[t]?o.replace(t,e[t]):o}),E&&Object.keys(E).length>0&&(f=o,$&&(f=f.replace("contact@example.com",$)),I&&(f=f.replace("202-555-0188",I)),N&&(f=f.replace("2360 Hood Avenue, San Diego, CA, 92123",N)),o=f,o=Q(o))}const s=`\n\t\t\t\t<style>\n\t\t\t\t\t.st-block-container {\n${h}\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t`;e.innerHTML=s+b+'<div class="st-block-container">'+o+"</div>",w.forEach((t,o)=>{e?.host.style.setProperty(`--ast-global-color-${o}`,t)});const n=a.shadowRoot.querySelectorAll("img");e&&(n.forEach(e=>{(0,d.p)(e.src)||A||0===l?.length||0===Object.keys(E).length||!E||J(e,"hidden")}),V(),((e,t)=>{A||0!==Object.keys(E).length&&E&&t?.length&&e?.forEach(function(e){(0,d.p)(e.src)||(e.onload=()=>{const o=e.getAttribute("src")||"";if(o.includes("unsplash")||o.includes("pexels")||o.includes("pixabay"))return void J(e,_);const s=t[L];if(void 0!==s)if(s.url.includes("unsplash")||s.url.includes("pexels")||s.url.includes("pixabay")){if(L++,void 0===t[L]&&(L=0),"PICTURE"===e.parentNode.nodeName)e.parentNode.querySelectorAll("source").forEach(e=>{e.setAttribute("srcset",s.optimized_url)}),e.parentNode.querySelector("img").setAttribute("src",s.optimized_url);else{const t=document.createElement("img");t.src=s.optimized_url,e.parentNode.replaceChild(t,e)}J(e,_)}else J(e,_);else J(e,_)},e.onerror=()=>{J(e,_)})})})(n,l))}var f;return()=>{e=!1}},[e,A,E,x]),(0,a.useEffect)(()=>{const e=new ResizeObserver(V);e.observe(document.documentElement);const t=P.current;return t&&e.observe(t),()=>{e&&e.disconnect()}},[]),(0,a.useEffect)(()=>{const e=document.querySelector("#ast-block-templates-modal-wrap");if(!e)return;const t=new MutationObserver(V);return t.observe(e,{childList:!0,attributes:!0,subtree:!0}),()=>{t&&t.disconnect()}},[]),(0,a.useEffect)(()=>{const e=P?.current;if(e){const t=e.shadowRoot;w.forEach((e,o)=>{null!==t&&t.host.style.setProperty(`--ast-global-color-${o}`,e)})}},[w]);const J=(e,t)=>{e&&(e.style.visibility=t)},Q=(e="")=>N?e.replace(/(src="https:\/\/maps\.google\.com\/maps\?q=)([^&]+)(&z=\d+&hl=en&t=m&output=embed&iwloc=near")/g,`$1${encodeURIComponent(N)}$3`):e;let X=0,Y=0;const Z=(e,t,o)=>{const s=e.scrollTop,l=t-s;let n=0;const c=function(){n+=20;const t=g.A.linearTween(n,s,l,o);e.scrollTop=t,n<o&&(X=setTimeout(c,20))};c()},ee=(e,t)=>{!D&&e&&null===e.target.closest(".gt-single-block-action-btns")&&"function"==typeof S&&S(t)};(0,a.useEffect)(()=>{R||(L=0,B=0)},[R]);const te=v?"origin-top-right":"origin-top-left";return React.createElement(b.A,{className:(0,i.xW)("w-full h-fit",D?"importing":"")},React.createElement("div",{className:(0,i.xW)("hover:!min-h-[3.375rem] cursor-pointer relative border border-solid border-border-primary hover:border-accent-spectra transition duration-150 ease-in-out overflow-hidden group",D&&"border-accent-spectra")},React.createElement("div",{className:`thumbnail left-0 m-0 min-h-[auto] overflow-visible text-left top-0 ${te} relative pointer-events-none`,ref:T},React.createElement("div",{className:"absolute w-[1200px] pointer-events-none max-h-none overflow-hidden",ref:P},!t&&React.createElement("img",{srcSet:`${G}, ${M}`,src:M,alt:"Preview"}),React.createElement("div",{className:"preview"},React.createElement("span",{className:"ast-block-templates-icon ast-block-templates-icon-search"})))),React.createElement("div",{className:(0,i.xW)("absolute inset-0 grid grid-cols-1 grid-rows-1 place-items-end",D?"pointer-events-none":""),onMouseEnter:()=>{if("page"!==e.type)return;const t=P.current;X&&clearTimeout(X),Y=setTimeout(()=>{Z(t,t.scrollHeight,4e3)},1e3)},onMouseLeave:()=>{Y&&clearTimeout(Y);const e=P.current;X&&clearTimeout(X),Z(e,0,1500)},onClick:t=>ee(t,e),role:"button",tabIndex:"0",onKeyDown:t=>"Enter"===t.key?ee(t,e):null},React.createElement("div",{className:(0,i.xW)("gt-single-block-action-btns opacity-100 md:opacity-0 group-hover:opacity-100 w-full flex items-center justify-between px-3 py-2 backdrop-blur-sm bg-white/[0.85] shadow-action-buttons transition-all duration-150 ease-in-out",!0===W.importing?"opacity-100":"")},React.createElement(p.A,{title:C&&"active"!==z?React.createElement(h.A,{content:!(0,i.Fx)()?.active&&(0,l.__)("Unlock all patterns and design kits with the Essentials or Business Toolkit package.","astra-sites"),placement:"top"},(0,l.__)("Get Access","astra-sites")):q.notInstalled?(0,l.__)("Install Spectra & Insert","astra-sites"):q.inactive?(0,l.__)("Activate Spectra & Insert","astra-sites"):(0,l.__)("Insert","astra-sites"),showIcon:q.active,liveRequest:!0,item:e,importing:W.importing,onClick:e=>{if(C&&"active"!==z)return e?.preventDefault(),e?.stopPropagation(),(0,i.Fx)()?.active?(y.A.show(),!1):(window.open(ast_block_template_vars.getProURL,"_blank"),!1);F({...W,importing:!0}),H(!0)},onBlockImport:()=>{F({...W,importing:!1}),H(!1)},onImportFail:()=>{F({...W,importing:!1}),H(!1)},isLocked:C}),React.createElement(u.A,{item:e}))),C&&React.createElement("div",{className:"absolute top-2 right-2 z-10"},React.createElement(m.A,{item:e}))))}))}}]);